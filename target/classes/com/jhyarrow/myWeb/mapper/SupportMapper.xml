<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jhyarrow.myWeb.mapper.SupportMapper">

    <insert id="addSupport" parameterType="com.jhyarrow.myWeb.domain.Support">
    	insert into support(code,name,reason,date,trade_day,up_or_down) values (#{code},#{name},#{reason},#{date},#{tradeDay},#{upOrDown})
    </insert>
    
    <select id="getSupport"  resultType="com.jhyarrow.myWeb.domain.Support">
    	select * from support where up_or_down = 'æ¶¨' order by date desc
    </select>
    
    <select id="getSupportList" parameterType="int" resultType="com.jhyarrow.myWeb.domain.Support">
    	select * from support where trade_day = #{tradeDay}
    </select>
    
    <update id="updateSupport" parameterType="com.jhyarrow.myWeb.domain.Support">
    	update support set is_true = #{isTrue},up=#{up} where id =#{id}
    </update>
    
    <select id="getLine3" parameterType="com.jhyarrow.myWeb.domain.Line3" resultType="com.jhyarrow.myWeb.domain.Line3">
    	select * from line3 where day1 = #{day1} and day2 = #{day2} and day3 = #{day3}
    </select>
    
    <update id="updateLine3" parameterType="com.jhyarrow.myWeb.domain.Line3">
    	update line3 set up_days = #{upDays}, down_days = #{downDays},avg_up = #{avgUp},avg_down = #{avgDown} 
    		 where day1 = #{day1} and day2 = #{day2} and day3 = #{day3}
    </update>
    
    <insert id="addLine3" parameterType="com.jhyarrow.myWeb.domain.Line3">
    	insert into line3(day1,day2,day3,up_days,down_days,avg_up,avg_down) 
    		values(#{day1},#{day2},#{day3},#{upDays},#{downDays},#{avgUp},#{avgDown})
    </insert>
    
    <insert id="addSupportGoldenNeedle" parameterType="com.jhyarrow.myWeb.domain.support.SupportGoldenNeedle">
    	insert into support_golden_needle(stock_code,stock_name,date,trade_day) values(
    		#{stockCode},#{stockName},#{date},#{tradeDay})
    </insert>
    
    <select id="getSupportGoldenNeedle" parameterType="Integer" resultType="com.jhyarrow.myWeb.domain.support.SupportGoldenNeedle">
    	select * from support_golden_needle where trade_day = #{tradeDay}
    </select>
    
    <select id="getSupportGoldenNeedleList" resultType="com.jhyarrow.myWeb.domain.support.SupportGoldenNeedle">
    	select * from support_golden_needle order by stock_code,date
    </select>
    
    <update id="updateSupportGoldenNeedle" parameterType="com.jhyarrow.myWeb.domain.support.SupportGoldenNeedle">
    	update support_golden_needle set max_day1 = #{maxDay1}, max_day3 = #{maxDay3},max_day5 = #{maxDay5},
    		 min_day1 = #{minDay1},  min_day3 = #{minDay3},  min_day5 = #{minDay5} ,close_day1 = #{closeDay1} 
    		 ,close_day3 = #{closeDay3} ,close_day5 = #{closeDay5} ,up_per1 = #{upPer1} ,up_per3 = #{upPer3} ,up_per5 = #{upPer5} 
    		 where stock_code = #{stockCode} and date = #{date}
    </update>
    
    <insert id="addMacdGoldenCross" parameterType="com.jhyarrow.myWeb.domain.support.MacdGoldenCross">
    	insert into macd_golden_cross(stock_code,trade_day) values(#{stockCode},#{tradeDay})
    </insert>
    
    <select id="getMacdGoldenCrossList" parameterType="String"  resultType="com.jhyarrow.myWeb.domain.support.MacdGoldenCross">
    	select * from macd_golden_cross where stock_code = #{stockCode} order by trade_day
    </select>
    
    <update id="updateMacdGoldenCross" parameterType="com.jhyarrow.myWeb.domain.support.MacdGoldenCross">
    	update macd_golden_cross set up_per1 = #{upPer1}, up_per5 = #{upPer5},up_per10 = #{upPer10},bar = #{bar} 
    		 where stock_code = #{stockCode} and trade_day = #{tradeDay}
    </update>
    
    <insert id="addSpiderStockDailyError" parameterType="com.jhyarrow.myWeb.domain.SpiderStockDailyError">
    	insert into spider_stock_daily_error(stock_code,date,trade_day,stock_name) values (#{stockCode},#{date},#{tradeDay},#{stockName})
    </insert>
    
    <select id="getSpiderStockDailyErrorList" resultType="com.jhyarrow.myWeb.domain.SpiderStockDailyError">
    	select * from spider_stock_daily_error
    </select>
    
    <delete id="deleteSpiderStockDailyError" parameterType="com.jhyarrow.myWeb.domain.SpiderStockDailyError">
    	delete from spider_stock_daily_error where stock_code = #{stockCode} and date = #{date}
    </delete>
</mapper>